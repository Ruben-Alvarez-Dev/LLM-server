# Checkpoint Log — Concurrency & Context Enforcement

Date: 2025-09-06 09:15:00
Checkpoint: 3.2.0 — Concurrency per role + context window enforcement

¿Qué se hizo?
- `llm_server/concurrency.py`: ConcurrencyManager con semáforos por rol (merge profile/limits).
- `llm_server/generation.py`: enforcement de ventana (tokens ~ chars/4), timeout y uso de ConcurrencyManager.
- `llm_server/app.py`: guarda `concurrency` en `app.state` para uso en APIs.

Notas
- Context enforcement heurístico; cuando integremos tokenización directa, podremos afinar (opcional: usar `llama-tokenize`).

Próximo
- Chapter 04: endpoints `/v1/chat/completions` y `/v1/completions` con streaming y uso de registry+concurrency.

