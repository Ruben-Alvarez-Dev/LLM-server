# Checkpoint Log — Endpoints and Streaming

Date: 2025-09-06 09:30:00
Checkpoint: 4.1.0 — `/v1/completions` y `/v1/chat/completions` con streaming y tenant validation

¿Qué se hizo?
- `llm_server/api.py`: endpoints POST para completions y chat, soporte `stream`, validación de `X-Tenant-Id` en multi-tenant, uso de `ModelRegistry` + `ConcurrencyManager`.
- `llm_server/app.py`: se incluye el router y se integran métricas existentes.
- Stubs Kafka: `llm_server/messaging_stub.py` publica resultados si `confluent_kafka` está disponible.
- Tenancy helper: `llm_server/tenancy.py`.

Cómo probar
- `make run` → POST a `http://localhost:8081/v1/completions` con `{model,prompt,stream}`.
- En multi-tenant (`TENANCY_MODE=multi`), añadir header `X-Tenant-Id: main`.

Pendiente
- Métricas detalladas de uso/latencia y rate limit básico.

